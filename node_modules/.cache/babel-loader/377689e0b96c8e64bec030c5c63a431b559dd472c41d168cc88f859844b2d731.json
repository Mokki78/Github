{"ast":null,"code":"import _regeneratorRuntime from\"/Users/monikasaele/Github/react-app-1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/monikasaele/Github/react-app-1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/monikasaele/Github/react-app-1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import{useParams}from\"react-router-dom\";import{StoreContext}from\"../context/StoreContext\";import{Row,Col,Container}from\"react-bootstrap\";import{Loader}from\"../components/Spinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function SingleProduct(){var _useContext=useContext(StoreContext),addToCart=_useContext.addToCart,cartItems=_useContext.cartItems;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isError=_useState6[0],setIsError=_useState6[1];var _useParams=useParams(),id=_useParams.id;var cartItemAmount=cartItems[id];useEffect(function(){function getData(_x){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;setIsLoading(true);setIsError(false);_context.next=5;return fetch(url);case 5:response=_context.sent;_context.next=8;return response.json();case 8:json=_context.sent;setData(json);_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log(_context.t0);setIsError(true);case 16:_context.prev=16;setIsLoading(false);return _context.finish(16);case 19:case\"end\":return _context.stop();}},_callee,null,[[0,12,16,19]]);}));return _getData.apply(this,arguments);}getData(\"https://api.noroff.dev/api/v1/online-shop/\".concat(id));},[id]);var handleAddToCart=function handleAddToCart(){if(data&&data.id){addToCart(data.id);}};if(isLoading||!data.id){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center align-items-center\",children:/*#__PURE__*/_jsx(Loader,{})}),\";\"]});}if(isError){return/*#__PURE__*/_jsx(\"div\",{children:\"Error\"});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Container,{style:{border:\"1px solid black\"},className:\"mt-5 mb-5\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{className:\"col-10-md d-flex flex-column align-items-center  pt-5 pb-md-5\",children:/*#__PURE__*/_jsx(\"img\",{src:data.imageUrl,className:\"img-fluid\",alt:data.title,maxWidth:\"150px\",style:{minWidth:\"150px\"}})}),/*#__PURE__*/_jsxs(Col,{className:\"col-10-md d-flex flex-column align-items-center pt-2 pb-md-5 m-5 bg-white\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"display-5\",children:data.title}),/*#__PURE__*/_jsx(\"h5\",{className:\"p-3\",children:data.description}),/*#__PURE__*/_jsxs(\"span\",{className:\"discount-percent bg-danger\",children:[Math.round((data.price-data.discountedPrice)/data.price*100),\"% off\"]}),data.discountedPrice<data.price?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"original-price\",children:[\"Original price \",data.price]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"discounted-price\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Now only \",data.discountedPrice,\",-\"]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}):/*#__PURE__*/_jsxs(\"span\",{className:\"regular-price\",children:[\"NOK \",data.price,\",-\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-dark\",onClick:function onClick(){return handleAddToCart(id);},children:[\"Add to cart \",cartItemAmount>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[\"(\",cartItemAmount,\")\"]})]})}),/*#__PURE__*/_jsx(\"h5\",{className:\"pt-4\",children:\"Reviews :\"}),data.reviews.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No reviews available for this product.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-light\",children:data.reviews.map(function(review){return/*#__PURE__*/_jsxs(\"div\",{className:\"p-3\",children:[/*#__PURE__*/_jsx(\"h5\",{children:review.username}),/*#__PURE__*/_jsx(\"p\",{children:review.description}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Rating \",data.rating&&data.rating,/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-star\"})]})]},review.id);})})]})]})})});}export default SingleProduct;","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","StoreContext","Row","Col","Container","Loader","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","SingleProduct","_useContext","addToCart","cartItems","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","isLoading","setIsLoading","_useState5","_useState6","isError","setIsError","_useParams","id","cartItemAmount","getData","_x","_getData","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","response","json","wrap","_callee$","_context","prev","next","fetch","sent","t0","console","log","finish","stop","concat","handleAddToCart","children","className","style","border","src","imageUrl","alt","title","maxWidth","minWidth","description","Math","round","price","discountedPrice","onClick","reviews","length","map","review","username","rating"],"sources":["/Users/monikasaele/Github/react-app-1/src/pages/SingleProduct.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport { StoreContext } from \"../context/StoreContext\";\nimport { Row, Col, Container } from \"react-bootstrap\";\nimport { Loader } from \"../components/Spinner\";\n\nexport function SingleProduct() {\n  const { addToCart, cartItems } = useContext(StoreContext);\n  const [data, setData] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isError, setIsError] = useState(false);\n\n  let { id } = useParams();\n\n  const cartItemAmount = cartItems[id];\n\n  useEffect(() => {\n    async function getData(url) {\n      try {\n        setIsLoading(true);\n        setIsError(false);\n\n        const response = await fetch(url);\n        const json = await response.json();\n\n        setData(json);\n      } catch (error) {\n        console.log(error);\n        setIsError(true);\n      } finally {\n        setIsLoading(false);\n      }\n    }\n\n    getData(`https://api.noroff.dev/api/v1/online-shop/${id}`);\n  }, [id]);\n\n  const handleAddToCart = () => {\n    if (data && data.id) {\n      addToCart(data.id);\n    }\n  };\n\n  if (isLoading || !data.id) {\n    return (\n      <>\n        <div className=\"d-flex justify-content-center align-items-center\">\n          <Loader />\n        </div>\n        ;\n      </>\n    );\n  }\n\n  if (isError) {\n    return <div>Error</div>;\n  }\n\n  return (\n    <>\n      <Container style={{ border: \"1px solid black\" }} className=\"mt-5 mb-5\">\n        <Row>\n          <Col className=\"col-10-md d-flex flex-column align-items-center  pt-5 pb-md-5\">\n            <img\n              src={data.imageUrl}\n              className=\"img-fluid\"\n              alt={data.title}\n              maxWidth=\"150px\"\n              style={{ minWidth: \"150px\" }}\n            />\n          </Col>\n          <Col className=\"col-10-md d-flex flex-column align-items-center pt-2 pb-md-5 m-5 bg-white\">\n            <h1 className=\"display-5\">{data.title}</h1>\n            <h5 className=\"p-3\">{data.description}</h5>\n            <span className=\"discount-percent bg-danger\">\n              {Math.round(\n                ((data.price - data.discountedPrice) / data.price) * 100\n              )}\n              % off\n            </span>\n\n            {data.discountedPrice < data.price ? (\n              <>\n                <span className=\"original-price\">\n                  Original price {data.price}\n                </span>\n                <br />\n                <span className=\"discounted-price\">\n                  <strong>Now only {data.discountedPrice},-</strong>\n                </span>\n                <br />\n                <br />\n              </>\n            ) : (\n              <span className=\"regular-price\">NOK {data.price},-</span>\n            )}\n\n            <div className=\"p-4\">\n              <button\n                className=\"btn btn-outline-dark\"\n                onClick={() => handleAddToCart(id)}\n              >\n                Add to cart {cartItemAmount > 0 && <>({cartItemAmount})</>}\n              </button>\n            </div>\n\n            <h5 className=\"pt-4\">Reviews :</h5>\n            {data.reviews.length === 0 ? (\n              <p>No reviews available for this product.</p>\n            ) : (\n              <div className=\"bg-light\">\n                {data.reviews.map((review) => (\n                  <div key={review.id} className=\"p-3\">\n                    <h5>{review.username}</h5>\n                    <p>{review.description}</p>\n                    <p>\n                      Rating {data.rating && data.rating}\n                      <i className=\"fa fa-star\"></i>\n                    </p>\n                  </div>\n                ))}\n              </div>\n            )}\n          </Col>\n        </Row>\n      </Container>\n    </>\n  );\n}\n\nexport default SingleProduct;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}