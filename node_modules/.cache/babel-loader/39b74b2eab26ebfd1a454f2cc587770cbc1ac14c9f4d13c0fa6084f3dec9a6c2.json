{"ast":null,"code":"import _defineProperty from\"/Users/monikasaele/Github/react-app-1/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/monikasaele/Github/react-app-1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/monikasaele/Github/react-app-1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/monikasaele/Github/react-app-1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/monikasaele/Github/react-app-1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{createContext,useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export var StoreContext=/*#__PURE__*/createContext();var getDefaultCart=function getDefaultCart(products){var cart={};for(var i=0;i<products.length;i++){cart[products[i].id]=0;}return cart;};export var StoreContextProvider=function StoreContextProvider(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),cartItems=_useState2[0],setCartItems=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),products=_useState4[0],setProducts=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isError=_useState8[0],setIsError=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),cartItemCount=_useState10[0],setCartItemCount=_useState10[1];useEffect(function(){function fetchProducts(){return _fetchProducts.apply(this,arguments);}function _fetchProducts(){_fetchProducts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"https://api.noroff.dev/api/v1/online-shop/\");case 3:response=_context.sent;if(response.ok){_context.next=6;break;}throw new Error(\"Network response was not ok\");case 6:_context.next=8;return response.json();case 8:data=_context.sent;setProducts(data);setCartItems(getDefaultCart(data));setIsLoading(false);_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);setIsError(true);console.error(\"Error fetching product data:\",_context.t0);case 18:case\"end\":return _context.stop();}},_callee,null,[[0,14]]);}));return _fetchProducts.apply(this,arguments);}fetchProducts();},[]);var getTotalCartAmount=function getTotalCartAmount(){var totalAmount=0;var _loop=function _loop(){var quantity=cartItems[itemId];if(quantity>0){var productId=Number(itemId);var itemInfo=products.find(function(product){return product.id===productId;});if(itemInfo){totalAmount+=quantity*itemInfo.price;}}};for(var itemId in cartItems){_loop();}return totalAmount;};var getTotalCartItemCount=function getTotalCartItemCount(){var totalCount=0;for(var itemId in cartItems){totalCount+=cartItems[itemId];}return totalCount;};var addToCart=function addToCart(itemId){setCartItems(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},itemId,prev[itemId]+1));});};var removeFromCart=function removeFromCart(itemId){setCartItems(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},itemId,prev[itemId]-1));});};var updateCartItemCount=function updateCartItemCount(newAmount,itemId){newAmount=Number(newAmount);if(isNaN(newAmount)){return;}setCartItems(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},itemId,newAmount));});};var clearCart=function clearCart(){setCartItems(getDefaultCart(products));setCartItemCount(0);};var contextValue={cartItems:cartItems,products:products,addToCart:addToCart,removeFromCart:removeFromCart,updateCartItemCount:updateCartItemCount,totalAmount:getTotalCartAmount,totalItemCount:getTotalCartItemCount,clearCart:clearCart,cartItemCount:cartItemCount};if(isLoading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});}if(isError){return/*#__PURE__*/_jsx(\"p\",{children:\"An error occurred while fetching data.\"});}return/*#__PURE__*/_jsx(StoreContext.Provider,{value:contextValue,children:props.children});};export default StoreContextProvider;","map":{"version":3,"names":["React","createContext","useState","useEffect","jsx","_jsx","StoreContext","getDefaultCart","products","cart","i","length","id","StoreContextProvider","props","_useState","_useState2","_slicedToArray","cartItems","setCartItems","_useState3","_useState4","setProducts","_useState5","_useState6","isLoading","setIsLoading","_useState7","_useState8","isError","setIsError","_useState9","_useState10","cartItemCount","setCartItemCount","fetchProducts","_fetchProducts","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","sent","ok","Error","json","t0","console","error","stop","getTotalCartAmount","totalAmount","_loop","quantity","itemId","productId","Number","itemInfo","find","product","price","getTotalCartItemCount","totalCount","addToCart","_objectSpread","_defineProperty","removeFromCart","updateCartItemCount","newAmount","isNaN","clearCart","contextValue","totalItemCount","children","Provider","value"],"sources":["/Users/monikasaele/Github/react-app-1/src/context/StoreContext.jsx"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\n\nexport const StoreContext = createContext();\n\nconst getDefaultCart = (products) => {\n  let cart = {};\n  for (let i = 0; i < products.length; i++) {\n    cart[products[i].id] = 0;\n  }\n  return cart;\n};\n\nexport const StoreContextProvider = (props) => {\n  const [cartItems, setCartItems] = useState({});\n  const [products, setProducts] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isError, setIsError] = useState(false);\n  const [cartItemCount, setCartItemCount] = useState(false);\n\n  useEffect(() => {\n    async function fetchProducts() {\n      try {\n        const response = await fetch(\n          \"https://api.noroff.dev/api/v1/online-shop/\"\n        );\n        if (!response.ok) {\n          throw new Error(\"Network response was not ok\");\n        }\n        const data = await response.json();\n        setProducts(data);\n        setCartItems(getDefaultCart(data));\n        setIsLoading(false);\n      } catch (error) {\n        setIsError(true);\n        console.error(\"Error fetching product data:\", error);\n      }\n    }\n\n    fetchProducts();\n  }, []);\n\n  const getTotalCartAmount = () => {\n    let totalAmount = 0;\n    for (const itemId in cartItems) {\n      const quantity = cartItems[itemId];\n\n      if (quantity > 0) {\n        const productId = Number(itemId);\n        const itemInfo = products.find((product) => product.id === productId);\n\n        if (itemInfo) {\n          totalAmount += quantity * itemInfo.price;\n        }\n      }\n    }\n    return totalAmount;\n  };\n\n  const getTotalCartItemCount = () => {\n    let totalCount = 0;\n    for (const itemId in cartItems) {\n      totalCount += cartItems[itemId];\n    }\n    return totalCount;\n  };\n\n  const addToCart = (itemId) => {\n    setCartItems((prev) => {\n      return {\n        ...prev,\n        [itemId]: prev[itemId] + 1,\n      };\n    });\n  };\n\n  const removeFromCart = (itemId) => {\n    setCartItems((prev) => ({ ...prev, [itemId]: prev[itemId] - 1 }));\n  };\n\n  const updateCartItemCount = (newAmount, itemId) => {\n    newAmount = Number(newAmount);\n\n    if (isNaN(newAmount)) {\n      return;\n    }\n\n    setCartItems((prev) => ({ ...prev, [itemId]: newAmount }));\n  };\n\n  const clearCart = () => {\n    setCartItems(getDefaultCart(products));\n    setCartItemCount(0);\n  };\n\n  const contextValue = {\n    cartItems,\n    products,\n    addToCart,\n    removeFromCart,\n    updateCartItemCount,\n    totalAmount: getTotalCartAmount,\n    totalItemCount: getTotalCartItemCount,\n    clearCart,\n    cartItemCount,\n  };\n\n  if (isLoading) {\n    return <p>Loading...</p>;\n  }\n\n  if (isError) {\n    return <p>An error occurred while fetching data.</p>;\n  }\n\n  return (\n    <StoreContext.Provider value={contextValue}>\n      {props.children}\n    </StoreContext.Provider>\n  );\n};\n\nexport default StoreContextProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}